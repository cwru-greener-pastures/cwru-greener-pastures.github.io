
Result Size: 1465 x 228
accordian("refresh");
  
  return mqtt_string;
}
​
function getMap(position){
  var theImg = document.getElementById("satImage");
  var msg = document.getElementById("msg");
  
  // Create an XMLHttpRequest object
  const xhttp = new XMLHttpRequest();
​
// Define a callback function
  xhttp.onload = function() {
    // Here you can use the Data
    var msg = document.getElementById("msg");
    var theImg = document.getElementById("satImage");
    var theBox = document.getElementById("theBox");
    
    obj = JSON.parse(this.responseText);
    theBox.style.width = `${obj.width}px`;
    theImg.src = obj.href;
    accordian("marker");
    accordian("refresh");
  }
​
  // Send a request
  xhttp.open("GET", "https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/export?bbox=" + position.coords.longitude + "%2C" + position.coords.latitude + "%2C" + position.coords.longitude + "%2C" + position.coords.latitude + "&bboxSR=4326&layers=&layerDefs=&size=" + mapSize + "%2C" + mapSize + "&imageSR=4326&historicMoment=&format=png&transparent=false&dpi=&time=&layerTimeOptions=&dynamicLayers=&gdbVersion=&mapScale=9027.977411&rotation=&datumTransformations=&layerParameterValues=&mapRangeValues=&layerRangeValues=&clipping=&spatialFilter=&f=pjson");
  xhttp.send();
}
​
​
function showError(error) {
  var x = document.getElementById("longLat");
  x.innerHTML = x.innerHTML + "There was an error... <br />"
  switch(error.code) {
    case error.PERMISSION_DENIED:
      x.innerHTML = x.innerHTML + "User denied the request for Geolocation."
      break;
    case error.POSITION_UNAVAILABLE:
      x.innerHTML = x.innerHTML + "Location information is unavailable."
      break;
    case error.TIMEOUT:
      x.innerHTML = x.innerHTML + "The request to get user location timed out."
      break;
